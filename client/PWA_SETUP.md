# Настройка PWA для Object Journal

## Что было добавлено

### 1. Манифест приложения (`public/manifest.json`)

- Полная конфигурация PWA с поддержкой фотографий
- Разрешения для камеры, микрофона, геолокации
- Иконки для различных размеров экранов
- Ярлыки для быстрого доступа к функциям

### 2. Service Worker (`public/sw.js`)

- Кэширование ресурсов для офлайн работы
- Обработка push-уведомлений
- Фоновая синхронизация данных
- Управление кэшем

### 3. HTML обновления (`public/index.html`)

- Подключение манифеста
- Мета-теги для iOS и Android
- Поддержка Windows tiles

### 4. Компонент камеры (`src/features/camera/`)

- Использование разрешений PWA для доступа к камере
- Захват фотографий
- Загрузка файлов с устройства

### 5. Хуки для PWA (`src/shared/lib/useServiceWorker.ts`)

- Регистрация Service Worker
- Запрос разрешений для камеры, уведомлений, геолокации

## Необходимые иконки

Для полной функциональности PWA необходимо добавить иконки в папку `public/icons/`:

- `icon-72x72.png` - 72x72 пикселя
- `icon-96x96.png` - 96x96 пикселей
- `icon-128x128.png` - 128x128 пикселей
- `icon-144x144.png` - 144x144 пикселя
- `icon-152x152.png` - 152x152 пикселя
- `icon-192x192.png` - 192x192 пикселя
- `icon-384x384.png` - 384x384 пикселя
- `icon-512x512.png` - 512x512 пикселей

## Разрешения PWA

Приложение запрашивает следующие разрешения:

1. **Камера** - для фотографирования объектов
2. **Микрофон** - для записи аудио (если потребуется)
3. **Геолокация** - для привязки фотографий к местоположению
4. **Уведомления** - для push-уведомлений
5. **Хранилище** - для кэширования данных
6. **Фоновая синхронизация** - для синхронизации в фоне

## Использование компонента камеры

```tsx
import { CameraComponent } from '../features/camera/CameraComponent';

const MyComponent = () => {
  const [cameraVisible, setCameraVisible] = useState(false);

  const handlePhotoTaken = (file: File) => {
    console.log('Фотография получена:', file);
    // Обработка фотографии
  };

  return (
    <>
      <Button onClick={() => setCameraVisible(true)}>Открыть камеру</Button>

      <CameraComponent
        visible={cameraVisible}
        onClose={() => setCameraVisible(false)}
        onPhotoTaken={handlePhotoTaken}
      />
    </>
  );
};
```

## Тестирование PWA

1. Соберите проект: `npm run build`
2. Запустите локальный сервер: `npx serve -s dist`
3. Откройте в Chrome и проверьте в DevTools > Application > Manifest
4. Установите приложение через меню браузера

## Дополнительные возможности

- **Офлайн работа** - благодаря Service Worker
- **Установка на устройство** - как нативное приложение
- **Push-уведомления** - для важных событий
- **Фоновая синхронизация** - для обновления данных
- **Доступ к файловой системе** - для работы с файлами

## Безопасность

Все разрешения запрашиваются только при необходимости и с согласия пользователя. Данные хранятся локально и синхронизируются только при наличии интернет-соединения.
