# Docker –¥–ª—è Vite PWA - –ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ–∑—é–º–µ

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω Dockerfile

- **–ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Vite** –≤–º–µ—Å—Ç–æ webpack
- **PWA –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
- **Healthcheck** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ PWA —Ñ–∞–π–ª–æ–≤

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **PWA –∑–∞–≥–æ–ª–æ–≤–∫–∏** –¥–ª—è service worker –∏ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è Vite
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏ –¥–ª—è PWA
- **CORS** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è PWA —Ñ—É–Ω–∫—Ü–∏–π

### 3. –°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **docker-build-vite.sh** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞
- **DOCKER_VITE.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **DOCKER_QUICK_START.md** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **–û–±–Ω–æ–≤–ª–µ–Ω .dockerignore** –¥–ª—è Vite

### 4. –û–±–Ω–æ–≤–ª–µ–Ω docker-compose.yml

- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è Vite
- **–†–µ—Å—É—Ä—Å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** –¥–ª—è PWA
- **Traefik –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –¥–ª—è production

## üöÄ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### Vite –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

- –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∞
- Hot Module Replacement (HMR)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∞–Ω–¥–ª—ã

### PWA –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- Service Worker (`/sw.js`)
- PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç (`/manifest.webmanifest`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞

### Docker –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–µ–≤
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
client/
‚îú‚îÄ‚îÄ Dockerfile                 # –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Å Vite
‚îú‚îÄ‚îÄ docker-compose.yml         # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ .dockerignore             # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Docker
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ nginx-docker.conf     # Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è PWA
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ docker-build-vite.sh  # –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ DOCKER_VITE.md            # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ DOCKER_QUICK_START.md     # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îî‚îÄ‚îÄ DOCKER_SUMMARY.md         # –≠—Ç–æ —Ä–µ–∑—é–º–µ
```

## üõ† –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã

### –°–±–æ—Ä–∫–∞

```bash
# –ü—Ä–æ—Å—Ç–∞—è —Å–±–æ—Ä–∫–∞
docker build -t object-journal:latest .

# –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∫—Ä–∏–ø—Ç–∞
./scripts/docker-build-vite.sh

# –° –≤–µ—Ä—Å–∏–µ–π
./scripts/docker-build-vite.sh v1.0.0 1.0.0
```

### –ó–∞–ø—É—Å–∫

```bash
# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫
docker run -d -p 8080:8080 object-journal:latest

# –° docker-compose
docker-compose up -d

# –° –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
docker run -d -p 8080:8080 \
  -e NODE_ENV=production \
  -e VITE_APP_VERSION=1.0.0 \
  object-journal:latest
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker logs <container_id>

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker stop <container_id>

# –£–¥–∞–ª–µ–Ω–∏–µ
docker rm <container_id>
```

## üåê –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: http://localhost:8080
- **PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç**: http://localhost:8080/manifest.webmanifest
- **Service Worker**: http://localhost:8080/sw.js

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `NODE_ENV=production` - —Ä–µ–∂–∏–º —Å–±–æ—Ä–∫–∏
- `TZ=Europe/Moscow` - –≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞
- `VITE_APP_VERSION` - –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü–æ—Ä—Ç—ã

- `8080` - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### Healthcheck

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:

- –ì–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`/`)
- PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ (`/manifest.webmanifest`)
- Service Worker (`/sw.js`)

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞** —Å Vite
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∞–Ω–¥–ª—ã**
- **Gzip —Å–∂–∞—Ç–∏–µ**
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤**

### PWA —Ñ—É–Ω–∫—Ü–∏–∏

- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
- **–û—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**
- **–î–æ—Å—Ç—É–ø –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º**

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ù–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
- **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
- **PWA —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**

## üöÄ Production –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ production
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ reverse proxy
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

```yaml
# docker-compose.prod.yml
version: '3.8'
services:
  object-journal:
    image: object-journal:latest
    deploy:
      replicas: 3
      resources:
        limits:
          memory: 512M
```

## üì± PWA –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞** –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω
- **–û—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞** –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- **Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** (–ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ)
- **–î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ** –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- **–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è** –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤
- **–§–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –∫–æ–Ω—Ç–µ–Ω—Ç–∞

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ PWA —Ñ—É–Ω–∫—Ü–∏–∏
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ—Ç—Ä–∏–∫–∏
3. **CI/CD** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ —Å–±–æ—Ä–∫—É –∏ –¥–µ–ø–ª–æ–π
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –∫ production –Ω–∞–≥—Ä—É–∑–∫–µ

---

**Docker –¥–ª—è Vite PWA –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ
