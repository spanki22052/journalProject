# Отладка проблем с камерой

## Проблема: Белый фон вместо видео

### Возможные причины:

1. **HTTPS не настроен** - камера работает только по HTTPS
2. **Разрешения не предоставлены** - браузер блокирует доступ к камере
3. **Неправильные настройки видео** - проблемы с параметрами getUserMedia
4. **CSS стили** - видео скрыто или неправильно стилизовано

### Шаги отладки:

#### 1. Проверьте консоль браузера

Откройте DevTools (F12) и посмотрите на сообщения в консоли:

- `Запуск камеры...`
- `Поток камеры получен: MediaStream`
- `Метаданные видео загружены`
- `Видео готово к воспроизведению`

#### 2. Проверьте HTTPS

```bash
# Запустите локальный HTTPS сервер
npx serve -s dist --ssl-cert path/to/cert.pem --ssl-key path/to/key.pem

# Или используйте http-server
npx http-server dist -S -C path/to/cert.pem -K path/to/key.pem
```

#### 3. Проверьте разрешения

- В Chrome: нажмите на иконку замка в адресной строке
- Убедитесь, что разрешение на камеру предоставлено
- Попробуйте сбросить разрешения и запросить заново

#### 4. Используйте тестовый компонент

Нажмите кнопку "Тест камеры" на главной странице для простой проверки

#### 5. Проверьте поддержку браузера

```javascript
// В консоли браузера
console.log('getUserMedia support:', !!navigator.mediaDevices?.getUserMedia);
console.log('Available devices:', navigator.mediaDevices?.enumerateDevices());
```

### Исправления в коде:

1. **Добавлен атрибут `muted`** - некоторые браузеры требуют muted для автовоспроизведения
2. **Улучшена обработка ошибок** - попытка использовать переднюю камеру если задняя недоступна
3. **Добавлены обработчики событий** - onloadedmetadata, oncanplay, onerror
4. **Исправлены CSS стили** - добавлен черный фон и object-fit: cover
5. **Добавлена отладочная информация** - логи в консоль для отслеживания процесса

### Альтернативные решения:

#### Если камера все еще не работает:

1. **Попробуйте другой браузер** - Chrome обычно лучше всего поддерживает камеру
2. **Проверьте настройки браузера** - убедитесь, что камера не заблокирована
3. **Используйте HTTP для тестирования** - некоторые браузеры позволяют камеру на localhost
4. **Проверьте драйверы камеры** - убедитесь, что камера работает в других приложениях

#### Для разработки можно временно использовать HTTP:

```javascript
// В webpack.config.js добавьте
devServer: {
  https: false, // Только для разработки!
  // ...
}
```

### Проверка работы:

1. Откройте приложение по HTTPS
2. Нажмите "Тест камеры"
3. Нажмите "Запустить камеру"
4. Должно появиться видео с камеры
5. Если тест работает, попробуйте основную камеру в модалке

### Логи для отладки:

```javascript
// Добавьте в консоль для проверки
navigator.mediaDevices
  .getUserMedia({ video: true })
  .then(stream => {
    console.log('Stream:', stream);
    console.log('Video tracks:', stream.getVideoTracks());
  })
  .catch(err => console.error('Error:', err));
```
